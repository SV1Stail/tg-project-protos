syntax = "proto3";

package publish_post;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/SV1Stail/tg-project-protos/gen/go/queue_scheduler/publish_post;publish_post_pb";

message PublishPost {
    // Object identifier
    string id = 1;
    // channel to publish
    string publish_channel = 2;
    // Object text or other info in body
    PublishPostData data = 3;
    // Object status
    string status = 4;
    // Object publishing time
    google.protobuf.Timestamp publish_at = 5;
    // Object creation time
    google.protobuf.Timestamp created_at = 6;
    // Object last updated time
    google.protobuf.Timestamp updated_at = 7;
    // retries attempts
    int32 attempts = 8;
}

message PublishPostData {
    string title = 1;
    string body = 2;
    string post_url = 3;
}

message CreatePostRequest {
    // channel to post
    string publish_channel = 1;
    // Object text or other info in body
    string data = 2;
    // Object publishing time
    google.protobuf.Timestamp publish_at = 3;
}
message CreatePostResponse { 
    // created Object identifier
    string id = 1;
}

message UpdatePostRequest {
    // Object identifier
    string id = 1;
    // channel to post
    string publish_channel = 2;
    // Object text or other info in body
    string data = 3;
    // Object publishing time
    google.protobuf.Timestamp publish_at = 4;
}
message UpdatePostResponse { 
    // updated Objects identifier
    string id = 1;
}

message DeletePostRequest {
    // Object identifier
    string id = 1;
}
message DeletePostResponse {
    // deleted Objects identifier
    string id = 1;
}

message GetPostRequest {
    // Object identifier
    string id = 1;
}
message GetPostResponse {
    // get Object
    PublishPost publish_post = 1;
}

message GetPostsForChannelRequest {
    // channel to post
    string publish_channel = 1;
}
message GetPostsForChannelResponse {
    // get Objects array
    repeated PublishPost publish_posts = 1;
}

message CreatePostSomeChannelsRequest {
    // channels to post
    repeated string publish_channels = 1;
    // Object text or other info in body
    string data = 2;
    // Object publishing time
    google.protobuf.Timestamp publish_at = 3;
}
message CreatePostSomeChannelsResponse { 
    // created Objects identifiers
    repeated string ids = 1;
}