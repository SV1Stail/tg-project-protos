syntax = "proto3";

package publisher;

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

option go_package = "github.com/SV1Stail/tg-project-protos/gen/go/publisher/publisher;publisher_pb";

service Publisher {
    rpc PublishScheduled (PublishScheduledRequest) returns (PublishScheduledResponse);
    rpc PublishNow (PublishNowRequest) returns (PublishNowResponse);
}

message PublishPostData {
    // Object title
    string title = 1;
    // Object text
    string body = 2;
    // URL on original post
    string post_url = 3;
}

message PublishScheduledRequest {
    // Object identifier
    string id = 1;
    // channel to post
    string publish_channel = 2;
    // Object data
    PublishPostData data = 3;
    // Object publishing time
    google.protobuf.Timestamp publish_at = 4;
    // Object publish delay
    google.protobuf.Duration delay = 5;
}
message PublishScheduledResponse {
    // Object identifier
    string id = 1;
}

message PublishNowRequest {
    // Object identifier
    string id = 1;
    // channel to post
    string publish_channel = 2;
    // Object data
    PublishPostData data = 3;
    // Object publishing time
    google.protobuf.Timestamp publish_at = 4;
}
message PublishNowResponse {
    // Object identifier
    string id = 1;
}


